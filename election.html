<!DOCTYPE html>
<html>
<head>
	<title>Model Election</title>
	<style type="text/css">
		*{
			padding: 0;
			margin: 0;
			font-family: sans-serif;
			box-sizing: border-box;
		}
		body{
			width: 100%;
			height: 145vh;			
			display: flex;
			justify-content: center;
			align-items: center;
			background: #fff;
		}
		section{
			width: calc(100% - 100px);			
			display: flex;
			justify-content: center;
			align-items: center;
			flex-direction: column;
		}
		section h1{
			color: #009;			
		}
		section input{
			width: 100%;
			height: 50px;
			text-align: center;
			font-size: 20px;
			margin: 10px 0;			
			border: 3px solid #000;
		}
		section ul{
			width: 100%;			
			display: flex;			
			justify-content: center;
			align-items: center;
			flex-wrap: wrap;	
		}
		section ul li{
			width: calc(50% - 20px);
			display: flex;
			justify-content: center;
			align-items: center;
			background: #f00;
			box-shadow: 1px 1px 10px #000;
			cursor: pointer;
			margin: 10px;
		}
		section ul li:hover{
			background: #f55;
		}
		section ul li .image{
			width: 200px;
			height: 200px;
			background: #ff5;
			display: flex;
			justify-content: center;
			align-items: center;			
		}
		section ul li .image img{
			width: calc(100% - 10px);
			height: calc(100% - 10px);
			object-fit: cover;
		}
		section ul li .party-name{
			width: calc(100% - 200px);
			font-size: 35px;
			text-align: center;
			color: #fff;
			text-shadow: 1px 1px 10px #000;
		}
		section button{
			border: none;
			outline: none;
			width: 100%;
			height: 50px;
			margin: 10px 0;
			font-size: 30px;
			color: #fff;
			background: #f00;
			cursor: pointer;
		}
		section button:hover{
			background: #f55;
		}
		@media(max-width: 980px){
			body{
				height: 1600px;
			}
			section{
				width: calc(100% - 100px);
			}
			section h1{
				font-size: 60px;
			}
			section input,section button{
				height: 100px;
				font-size: 40px;				
			}
			section ul li{
				width: calc(100% - 20px);
			}
		}
		@media(max-width: 700px){
			section h1{
				font-size: 40px;
			}
		}
	</style>
</head>
<body>
	<section>
		<h2>Result on 7-4-2021 4:00 PM</h2>
		<h1>இந்த தேர்தலில் உங்கள் ஆதரவு எந்த கட்சிக்கு?</h1>
		<input type="text" id="name" placeholder="Enter your name">
		<ul>
			<li id="0">
				<div class="image"><img src="img1.jpeg"></div><div class="party-name">DMK</div>
			</li>
			<li id="1">
				<div class="image"><img src="img2.jpeg"></div><div class="party-name">AIADMK</div>
			</li>
			<li id="2">
				<div class="image"><img src="img3.jpeg"></div><div class="party-name">NTK</div>
			</li>
			<li id="3">
				<div class="image"><img src="img4.png"></div><div class="party-name">AMMK</div>
			</li>
			<li id="4">
				<div class="image"><img src="img5.png"></div><div class="party-name">MNM</div>
			</li>
		</ul>
		<button id="btn">Submit</button>
	</section>
</body>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-database.js"></script>
<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyAu5dBGzb1vP9baJbNrAXCy_C_k7JTkfWc",
    authDomain: "model-election-62855.firebaseapp.com",
    projectId: "model-election-62855",
    storageBucket: "model-election-62855.appspot.com",
    messagingSenderId: "943112537438",
    appId: "1:943112537438:web:1670abba27f9a01a23fbcf",
    measurementId: "G-856ZCWM7D4"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>
<script type="text/javascript">	

	var inp=document.querySelector("section input");
	var btn=document.querySelector("section button");
	var li=document.querySelectorAll("section ul li");
	var list1=['DMK','AIADMK','NTK','AMMK','MNM'];
	btn.addEventListener("click",function(e){
		if(inp.value==""){
			inp.placeholder="Please Enter Your name";
		}
		else if(inp.value.length < 3){
			inp.value="";
			inp.placeholder="Please Enter Valid name";	
		}
		else{			
			var var1=0;
			var id_no;
			for(var j=0;j<li.length;j++){
				if(li[j].style.boxShadow=="rgb(0, 0, 255) 1px 1px 30px"){	
					var1=1;
					id_no=li[j].id;					
					break;
				}				
			}
			var temp_name=inp.value;
			inp.value="";
			if(var1==1){
				inp.placeholder="Enter your name";
				for(var j=0;j<li.length;j++){
					if(li[j].style.boxShadow=="rgb(0, 0, 255) 1px 1px 30px"){	
						li[j].style.boxShadow="1px 1px 10px #000";	
					}				
				}
				let date=new Date();
				let daynumber=date.getDate();
				let month=date.getMonth()+1;
				let year=date.getFullYear();
				let hour=date.getHours();
				let min=date.getMinutes();
				let sec=date.getSeconds();						
				const db_id=year+"-"+month+"-"+daynumber+","+hour+":"+min+":"+sec;

				const database=firebase.database();
				const db_name=temp_name;
				const db_party=list1[id_no];

				e.preventDefault();				
				database.ref('/voters_list/'+db_id).set({
					a_voterName: db_name,
					b_vote: db_party				
				});	
			}
			
			else{
				inp.placeholder="Please click party box also";	
			}						
		}		
	})
	for(var i=0;i<li.length;i++){
		li[i].addEventListener('click',function(){
			for(var j=0;j<li.length;j++){
				if(li[j].style.boxShadow=="rgb(0, 0, 255) 1px 1px 30px"){
					console.log("yes");
					li[j].style.boxShadow="1px 1px 10px #000";
				}				
			}			
			this.style.boxShadow="1px 1px 30px #00f";	
		})
	}
</script>
</html>